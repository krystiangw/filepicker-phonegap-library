var filepicker=function(){function e(e,t,n,r){i();var f=!!e["multiple"];var l=!!e?s(e):{};l.storeLocation=t.location||"S3";l.storePath=t.path;l.storeContainer=t.container;l.storeAccess=t.access||"private";if(f&&l.storePath){if(l.storePath.charAt(l.storePath.length-1)!="/"){throw"pickAndStore with multiple files requires a path that ends in '/'"}}var c=o(l,f);a(l);u(c,n,r)}function t(e,t,n){i();e=e||{};a(e);var r=o(e,null);u(r,t,n)}function n(e){window.filepicker.apikey=e}function r(){var e=new Date;return e.getTime().toString()}function i(){if(!window.filepicker.apikey){throw"Filepicker API Key not found"}}function s(e){var t={};for(key in e){t[key]=e[key]}return t}function o(e,t){var n="https://www.filepicker.io/dialog/open/";return n+"?key="+window.filepicker.apikey+"&id="+r()+"&iframe="+false+"&version=v1"+(e["services"]?"&s="+e["services"].join(","):"")+"&container=window"+"&multi=false"+(e["mimetypes"]!==undefined?"&m="+e["mimetypes"].join(","):"")+(e["extensions"]!==undefined?"&ext="+e["extensions"].join(","):"")+(e["openTo"]!==undefined?"&loc="+e["openTo"]:"")+(e["language"]?"&language="+e["language"]:"")+(e["maxSize"]?"&maxSize="+e["maxSize"]:"")+(e["maxFiles"]?"&maxFiles="+e["maxFiles"]:"")+(e["signature"]?"&signature="+e["signature"]:"")+(e["policy"]?"&policy="+e["policy"]:"")+(e["folders"]!==undefined?"&folders="+e["folders"]:"")+(e["storeLocation"]?"&storeLocation="+e["storeLocation"]:"")+(e["storePath"]?"&storePath="+e["storePath"]:"")+(e["storeContainer"]?"&storeContainer="+e["storeContainer"]:"")+(e["storeAccess"]?"&storeAccess="+e["storeAccess"]:"")+"&redirect_url=https://www.filepicker.io/dialog/phonegap_done/"+"&mobile=true"}function u(e,t,n){var r=window.open(encodeURI(e),"_blank","location=no,fullscreen=no,toolbar=yes,titlebar=yes,scrollbars=yes,resizable=yes");var i=function(e){if(e.url.toString().indexOf("fpurl")>-1){var i=e.url.toString().split("fpurl=")[1];if(i.indexOf("&id=")>-1){i=i.split("&id=")[0]}var s=String(i);i+="/metadata";jQuery.get(i,function(e){e.url=s;t(e)}).error(function(e){n(e)});r.close()}};if(r){if(r.addEventListener){r.addEventListener("loadstop",i)}else{r.attachEvent("loadstop",i)}}}function a(e){function n(e,t,n){if(e[t]===undefined){e[t]=n}}function r(e){return e&&Object.prototype.toString.call(e)==="[object Array]"}var t=function(t,n,i){if(e[n]){if(!r(e[n])){e[n]=[e[n]]}}else if(e[t]){e[n]=[e[t]]}else if(i){e[n]=i}};var i={COMPUTER:1,DROPBOX:2,FACEBOOK:3,GITHUB:4,GMAIL:5,IMAGE_SEARCH:6,URL:7,WEBCAM:8,GOOGLE_DRIVE:9,SEND_EMAIL:10,INSTAGRAM:11,FLICKR:12,VIDEO:13,EVERNOTE:14,PICASA:15,WEBDAV:16,FTP:17,ALFRESCO:18,BOX:19,SKYDRIVE:20,GDRIVE:21,CUSTOMSOURCE:22,CLOUDDRIVE:23};t("service","services");t("mimetype","mimetypes");t("extension","extensions");if(e["services"]){for(var s=0;s<e["services"].length;s++){var o=(""+e["services"][s]).replace(" ","");if(i[o]!==undefined){o=i[o]}e["services"][s]=o}}if(e["mimetypes"]&&e["extensions"]){throw"Error: Cannot pass in both mimetype and extension parameters to the pick function"}if(!e["mimetypes"]&&!e["extensions"]){e["mimetypes"]=["*/*"]}if(e["openTo"]){e["openTo"]=i[e["openTo"]]||e["openTo"]}n(e,"container","window")}return{setKey:n,pick:t,pickAndStore:e};}()